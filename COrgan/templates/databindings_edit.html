{% extends "luminouslayout.html" %}

{% block LHeader %}
    <!-- DATE RANGE PICKER -->
	<link rel="stylesheet" type="text/css" href="{{ url_for('LDashboard.static', filename='js/bootstrap-daterangepicker/daterangepicker-bs3.css') }}" />
	<!-- TYPEAHEAD -->
	<link rel="stylesheet" type="text/css" href="{{ url_for('LDashboard.static', filename='js/typeahead/typeahead.css') }}" />
	<!-- FILE UPLOAD -->
	<link rel="stylesheet" type="text/css" href="{{ url_for('LDashboard.static', filename='js/bootstrap-fileupload/bootstrap-fileupload.min.css') }}" />
	<!-- SELECT2 -->
	<link rel="stylesheet" type="text/css" href="{{ url_for('LDashboard.static', filename='js/select2/select2.min.css') }}" />
	<!-- UNIFORM -->
	<link rel="stylesheet" type="text/css" href="{{ url_for('LDashboard.static', filename='js/uniform/css/uniform.default.min.css') }}" />
	<!-- JQUERY UPLOAD -->
	<!-- blueimp Gallery styles -->
	<link rel="stylesheet" href="{{ url_for('LDashboard.static', filename='js/blueimp/gallery/blueimp-gallery.min.css') }}">
	<!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
	<link rel="stylesheet" href="{{ url_for('LDashboard.static', filename='js/jquery-upload/css/jquery.fileupload.css') }}">
	<link rel="stylesheet" href="{{ url_for('LDashboard.static', filename='js/jquery-upload/css/jquery.fileupload-ui.css') }}">
{% endblock %}

{% block LBody %}
	<div class="container">
		<div class="row">
			<div id="content" class="col-lg-12">
		<!-- PAGE HEADER-->
		<div class="row">
			<div class="col-sm-12">
				<div class="page-header">
			<!-- BREADCRUMBS -->
			<ul class="breadcrumb">
				<li>
					<i class="fa fa-home"></i>
					<a href="{{ url_for('LDashboard.home') }}">Home</a>
				</li>
				<li>
					{{ bindingItem.Name }}
				</li>
			</ul>
			<!-- /BREADCRUMBS -->
			<div class="clearfix">
				<h3 class="content-title pull-left">{{ L_PageTitle }}</h3>
			</div>
			<div class="description">{{ L_PageDescription }}</div>
				</div>
			</div>
		</div>
		<!-- /PAGE HEADER -->
		<!-- FORMS -->
		<div class="row">
			<div class="col-md-12">
				<div class="row">
			        <div class="col-md-12">
                        <!-- BASIC -->
                        <div class="box border orange">
                            <div class="box-title">
                                <h4><i class="fa fa-bars"></i>更新数据绑定</h4>
                            </div>
                            <div class="box-body big">
                                <form role="form" method="post" action="{{ url_for('LDashboard.performEditDataBindings') }}">
                                    <div class="form-group">
                                        <label for="tHost">数据绑定地址(Host)</label>
                                        <input name="f_host" type="text" class="form-control" id="tHost" value="{{ bindingItem.Host }}">
                                    </div>
                                    <div class="form-group">
                                        <label for="tPort">端口号(Port)</label>
                                        <input name="f_port" type="text" class="form-control" id="tPort" value="{{ bindingItem.Port }}">
                                    </div>
                                    <div class="form-group">
                                        <label for="tPath">绑定位置(Path)</label>
                                        <input name="f_path" type="text" class="form-control" id="tPath" value="{{ bindingItem.Source_path }}">
                                    </div>
                                    <div class="form-group">
                                        <label for="tType">绑定源类型(Type)</label>
                                        <select name="f_checktype" id="tType" class="form-control col-md-12">
                                            <option value="MySQL">MySQL</option>
                                            <option value="Hive">Hive</option>
                                            <option value="Hbase">Hbase</option>
                                            <option value="HDFS">HDFS</option>
                                        </select>
                                    </div>
                                    &nbsp;
                                    <div class="form-group">
                                        <label>绑定类型(FlowType)</label>
                                        <div class="col-md-12">
                                            <label class="checkbox-inline col-md-2">
                                                <input name="f_checkboxsource" id="flowTypeSourceCheckBox" type="checkbox" value="1"> 源(Source)
                                            </label>
                                            <label class="checkbox-inline col-md-2">
                                                <input name="f_checkboxsink" id="flowTypeSinkCheckBox" type="checkbox" value="2"> 汇(Sink)
                                            </label>
                                        </div>
                                    </div>
                                    &nbsp;
                                    <div class="separator"></div>
                                    <div class="form-group">
                                        <label for="tUsername">链接凭证用户名(Username)</label>
                                        <input name="f_username" type="text" class="form-control" id="tUsername" value="{{ bindingItem.Username }}">
                                    </div>
                                    <div class="form-group">
                                        <label for="tPassword">链接凭证密码(Password)</label>
                                        <input name="f_nPassword" type="password" class="form-control" id="tPassword" placeholder="未更改">
                                    </div>
                                    <button type="submit" class="btn btn-success col-md-3">提交</button>
                                    <br/>
                                    <input type="hidden" name="f_password" value="{{ bindingItem.Password }}">
                                    <input type="hidden" name="f_name" value="{{ bindingItem.Name }}">
                                </form>
                            </div>
                        </div>
                        <!-- /BASIC -->
			        </div>
				</div>
			</div>
		</div>
		<!-- /FORMS -->
		<div class="separator"></div>
		<div class="footer-tools">
			<span class="go-top">
				<i class="fa fa-chevron-up"></i> Top
			</span>
		</div>
			</div><!-- /CONTENT-->
		</div>
	</div>
{% endblock %}

{% block LScript %}
    <!-- TYPEHEAD -->
	<script type="text/javascript" src="{{ url_for('LDashboard.static', filename='js/typeahead/typeahead.min.js') }}"></script>
	<!-- AUTOSIZE -->
	<script type="text/javascript" src="{{ url_for('LDashboard.static', filename='js/autosize/jquery.autosize.min.js') }}"></script>
	<!-- COUNTABLE -->
	<script type="text/javascript" src="{{ url_for('LDashboard.static', filename='js/countable/jquery.simplyCountable.min.js') }}"></script>
	<!-- INPUT MASK -->
	<script type="text/javascript" src="{{ url_for('LDashboard.static', filename='js/bootstrap-inputmask/bootstrap-inputmask.min.js') }}"></script>
	<!-- SELECT2 -->
	<script type="text/javascript" src="{{ url_for('LDashboard.static', filename='js/select2/select2.min.js') }}"></script>


	<script>
		jQuery(document).ready(function() {
            $("#flowTypeSourceCheckBox").attr("checked", {{ source_checked }});
            $("#flowTypeSinkCheckBox").attr("checked", {{ sink_checked }});
            jQuery("#active-dataBindings").addClass("active");
            jQuery("#selected-dataBindings").addClass("selected");
            var purityTypeL = document.getElementById('tType').options.length;
            var purityTypeO = document.getElementById('tType').options;
            for(var i = 1; i < Number(purityTypeL); i++) {
                if (purityTypeO[i].text == '{{ bindingItem.Type }}') {
                    purityTypeO[i].selected = true;
                    break;
                }
            }
		});
	</script>
{% endblock %}