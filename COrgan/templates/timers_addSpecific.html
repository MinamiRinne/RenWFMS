{% extends "luminouslayout.html" %}

{% block LHeader %}
    <!-- DATE RANGE PICKER -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('LDashboard.static', filename='js/bootstrap-daterangepicker/daterangepicker-bs3.css') }}" />
    <!-- TYPEAHEAD -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('LDashboard.static', filename='js/typeahead/typeahead.css') }}" />
    <!-- SELECT2 -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('LDashboard.static', filename='js/select2/select2.min.css') }}" />
    <!-- UNIFORM -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('LDashboard.static', filename='js/uniform/css/uniform.default.min.css') }}" />
    <!-- JQUERY UPLOAD -->
    <!-- blueimp Gallery styles -->
    <link rel="stylesheet" href="{{ url_for('LDashboard.static', filename='js/blueimp/gallery/blueimp-gallery.min.css') }}">
    <!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
    <link rel="stylesheet" href="{{ url_for('LDashboard.static', filename='js/jquery-upload/css/jquery.fileupload.css') }}">
    <link rel="stylesheet" href="{{ url_for('LDashboard.static', filename='js/jquery-upload/css/jquery.fileupload-ui.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('LDashboard.static', filename='js/datepicker/themes/default.min.css') }}" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('LDashboard.static', filename='js/datepicker/themes/default.date.min.css') }}" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('LDashboard.static', filename='js/datepicker/themes/default.time.min.css') }}" />
{% endblock %}

{% block LBody %}
    <div class="container">
        <div class="row">
            <div id="content" class="col-lg-12">
                <!-- PAGE HEADER-->
                <div class="row">
                    <div class="col-sm-12">
                        <div class="page-header">
                            <!-- BREADCRUMBS -->
                            <ul class="breadcrumb">
                                <li>
                                    <i class="fa fa-home"></i>
                                    <a href="{{ url_for('LDashboard.home') }}">Home</a>
                                </li>
                                <li>
                                    {{ L_PageTitle }}
                                </li>
                            </ul>
                            <!-- /BREADCRUMBS -->
                            <div class="clearfix">
                                <h3 class="content-title pull-left">{{ L_PageTitle }}</h3>
                            </div>
                            <div class="description">{{ L_PageDescription }}</div>
                        </div>
                    </div>
                </div>
                <!-- /PAGE HEADER -->
                <!-- FORMS -->
                <div class="row">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-12">
                                <!-- BASIC -->
                                <div class="box border orange">
                                    <div class="box-title">
                                        <h4><i class="fa fa-clock-o"></i>新建定时器</h4>
                                    </div>
                                    <div class="box-body big">
                                        <form method="post" action="{{ url_for('LDashboard.performAddSpecificTimer') }}">
                                            <div class="form-group">
                                                <label for="tName">任务计划唯一名字：</label>
                                                <input name="f_name" type="text" class="form-control" id="tName">
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label">执行日期:</label>
                                                <div >
                                                    <input type="text" name="f_executeDate" class="form-control datepicker-fullscreen">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class=" control-label">执行时刻:</label>
                                                <div>
                                                    <input type="text" name="f_executeTime" class="form-control timepicker-fullscreen">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label" for="e2">计划的工作项：</label>
                                                <select onchange="checkselect('e2')" name="f_accessList" multiple id="e2" class="col-md-12">
                                                    {% for wid in widList %}
                                                        <option>{{ wid["name"] }}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <br/><br/>
                                            <input type="hidden" name="output_binds" id="output_binds">
                                            <button type="submit" class="btn btn-success col-md-3">提交</button>
                                            <br/>
                                        </form>
                                    </div>
                                </div>
                                <!-- /BASIC -->
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /FORMS -->
                <div class="separator"></div>
                <div class="footer-tools">
			<span class="go-top">
				<i class="fa fa-chevron-up"></i> Top
			</span>
                </div>
            </div><!-- /CONTENT-->
        </div>
    </div>
{% endblock %}

{% block LScript %}
    <!-- TYPEHEAD -->
    <script type="text/javascript" src="{{ url_for('LDashboard.static', filename='js/typeahead/typeahead.min.js') }}"></script>
    <!-- AUTOSIZE -->
    <script type="text/javascript" src="{{ url_for('LDashboard.static', filename='js/autosize/jquery.autosize.min.js') }}"></script>
    <!-- COUNTABLE -->
    <script type="text/javascript" src="{{ url_for('LDashboard.static', filename='js/countable/jquery.simplyCountable.min.js') }}"></script>
    <!-- INPUT MASK -->
    <script type="text/javascript" src="{{ url_for('LDashboard.static', filename='js/bootstrap-inputmask/bootstrap-inputmask.min.js') }}"></script>
    <!-- SELECT2 -->
    <script type="text/javascript" src="{{ url_for('LDashboard.static', filename='js/select2/select2.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('LDashboard.static', filename='js/datepicker/picker.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('LDashboard.static', filename='js/datepicker/picker.date.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('LDashboard.static', filename='js/datepicker/picker.time.js') }}"></script>

    <script>
        jQuery(document).ready(function() {
            jQuery("#active-timers").addClass("active");
            jQuery("#selected-timers").addClass("selected");
            $(".datepicker").datepicker();
            $(".inlinepicker").datepicker({
                inline: true,
                showOtherMonths: true
            });
            $(".datepicker-fullscreen").pickadate();
            $(".timepicker-fullscreen").pickatime();
            App.setPage("forms");  //Set current page
            App.init(); //Initialise plugins and elements
        });
        function checkselect(objname) {
            o = document.getElementById(objname);
            t = document.getElementById("output_binds");
            var intvalue="";
            for(i=0;i<o.length;i++){
                if(o.options[i].selected){
                    intvalue+=o.options[i].value+";";
                }
            }
            t.value=intvalue.substr(0,intvalue.length-1);
            console.log(t.value);
        }

    </script>
{% endblock %}